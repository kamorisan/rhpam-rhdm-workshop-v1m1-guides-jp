# 3. RHPAM の機能とアーキテクチャ

Red Hat Process Automation Manager (別名: RHPAM) は、意思決定の自動化、意思決定のフロー、人とシステムの相互作用など、ビジネス要件のさまざまな部分を自動化することを可能にします。

次の図は、Red Hat Process Automation Manager (RHPAM) の主な機能を示しています。

![High Level Capability Component]({% image_path high-level-capability-components.png %}){:width="600px"}

## 機能の概要

### ビジネスルール管理

RHPAM には、Red Hat Decision Manager が含まれているため、オープンソースの [Drools](http://www.drools.org) コミュニティプロジェクトをベースにした、高性能で軽量かつスケーラブルなルール実行エンジンが含まれています。

- デシジョンテーブル、ガイド付きルール、drools、DMN(Decision Model and Notation)標準を使用したルールの自動化
- PMMLモデルをビジネス資産として利用し、意思決定やビジネスフローの中でAI/MLモデルを利用できるようにする
- ルールを検証するためのテストシナリオの使用法
- Complex Event Processing（CEP）を用いた、時間ベースのイベントの上で行われる意思決定（不正検知など）

### Business Optimizer

ビジネスリソースのプランニング問題を最適化するAI制約ソルバー。限られたリソース（人、物、金、時間等）内で、様々な制約を満たしつつ、
最良の結果（利益の最大化、コストの削減、作業の平準化等）を得たいというようなケースにおいて、どの組合せが最適かを現実的な時間で探索します。
このエンジンはupstreamの[OptaPlanner](http://www.optaplanner.org)プロジェクトをベースにしています。

### プロセス管理

RHPAMには、オープンソースの[jBPM](http://www.jbpm.org)プロジェクトをベースにした、高性能・軽量・拡張性に優れたBPMN2準拠のプロセス実行エンジン(Kie Server)が搭載されています。
ビジネスプロセス管理やヒューマンタスク管理などの機能を提供し、プロセスの自動化・最適化を可能にします。

### ケース管理

[jBPM](http://www.jbpm.org)エンジン(Kie Server)はCMMNに準拠しており、Business Centralを使用することで、ケースとも呼ばれる柔軟なプロセスを設計、実行、管理、監視することができます。
これにより、マイルストーンやケースファイルのような機能をケース内で調整し、他の伝統的なBPMNベースのプロセスとケースを統合することができます。

### ダッシュボードレポート

Red Hat PAM には強力なBusiness Activity Monitoring (BAM)機能が搭載されており、ユーザーは異なるデータソース（CSV、SQL、Kie Server...）に基づいてレポートを作成し、
カスタマイズされたページやコンポーネントを使用してレポートを表示することができます。

![High Level Capability Component]({% image_path high-level-capability-components-dashboard.png %}){:width="600px"}

---

## アーキテクチャの構成

製品を構成するためのさまざまな方法を理解し、さまざまなユースケースに対応できるように、プラットフォームのコンポーネントに親しんでみましょう。

このシナリオでは、インストールプラットフォームとして OpenShift を考えています。OpenShiftのコンソールを利用することで、作業環境のプロビジョニング、再作成、破棄が可能となり、他のユーザーとの自律的な連携が可能となります。

Red Hat PAMの主なコンポーネントと機能は、この図のように表示されています。

![RHPAM 7 Components]({% image_path rhpam-components.png %}){:width="600px"}

### Business Central Monitoring

デプロイされたプロジェクト、実行中のエンジン、プロセス駆動型アプリケーションのインスタンスの実行などを管理・監視するためのツールを提供する最新のウェブベースのワークベンチです。

### Business Central Authoring

ビジネスプロジェクトを管理するために使用されるWebベースのワークベンチで、異なるタイプのルール、プロセス、ケース、テストシナリオ、データオブジェクトなど、RHPAMで利用可能なビジネス資産を構築し、オーサリングするための強力なツールを提供します。

### Asset Repository

コラボレーティブな考え方に基づき、Business Centralを使って開発されたすべてのアセットは、gitベースのアセットリポジトリに保存されます。これにより、バージョン管理、インデックス作成、検索、作業内容の共有が可能になります。

### Artifact Repository

オーサリングフェーズが完了したら、アセットを_kjar_と呼ばれる_展開ユニットにパッケージ化することができます。このユニットは標準のJavaアーカイブ(JAR)で、アーティファクトリポジトリ(Nexusなど)に保存されます。

### Controller

デプロイメントユニットはコントローラによって実行エンジンにデプロイされます。
コントローラは、_Templates_または_Server Configurations_を使用して、ランタイム環境の複雑さを抽象化します。
これにより、クラスタ化されたネットワークトポロジーの管理の複雑さが大幅に軽減されます。
例えば、実行エンジンがビジネスラインごとにデプロイされて管理されるトポロジーなどです。

### KIE Server (Intelligent Process Server)

デプロイメントユニットに含まれるルールとプロセスを実行する、軽量でクラウドネイティブな実行エンジン。
KIE-Serversは、OpenShift Container Platformのクラウドネイティブ機能を使用して、水平方向および/または垂直方向に自動スケールすることができます。
プロセスの状態は永続的なストア（デフォルトではリレーショナルデータベース）に保存されるため、KIE-Serversはプロセスの実行に関してはステートレスであると考えることができます。

### Smart Router

KIE-Serverトポロジ上にランタイム抽象化レイヤを提供し、このトポロジのクライアントが単一のエンドポイントと対話をできるようにします。
Smart Routerには、どのプロセスとルール（デプロイメント・ユニット）がどのランタイム・エンジン/KIE-Serverにデプロイされているかの情報が含まれており、
クライアントの要求に基づいて正しいサーバー・インスタンスへのルーティング機能を提供します。

## PAM のアーキテクチャ

RHPAMはいくつかの異なる方法で設計することができますが、
中でも代表的なアーキテクチャの一つを以下に示しています。

![RHPAM 7 Architecture]({% image_path rhpam-7-architecture.png %}){:width="600px"}

----

**本ワークショップにおける環境について**

デジタル化された製品の重要な機能はサービスとして利用できることなので、スキルやLOB、ソリューションに応じて必要なツールを選択できるセルフサービスコンソールとしてOpenShift Container Platformを活用していきます。
OpenShift内でPAMがどのように振る舞うのか見てみましょう。
